<!-- Copyright (C) 2020-2025 Oleksandr Masniuk -->
<!-- SPDX-License-Identifier: AGPL-3.0-or-later -->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
    <title>App</title>
</head>
<body>
<th:block th:fragment="modal-essential">
    <!-- Modal error-->
    <div class="modal fade c-no-history" id="error-generation" tabindex="-1" role="dialog" aria-labelledby="error-generation-title" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="error-generation-title">Generation error</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    An error has occurred while generating your ladder.
                    <div id="error-generation-text" class="text-danger"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal session-->
    <div class="modal fade c-no-history" id="error-session" tabindex="-1" role="dialog" aria-labelledby="error-session-title" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="error-session-title">Session expired</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Your session has expired. It will be renewed automatically.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal update app-->
    <div class="modal fade c-no-history" id="application-version-update" tabindex="-1" role="dialog" aria-labelledby="application-version-update-title" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="application-version-update-title">Updating application
                        <span class="align-self-center spinner-border text-primary" role="status" aria-hidden="true"></span></h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    A new application version has been released. We need to update your local version before you can continue
                    using the website. Please reload the page if nothing happens in 10 seconds.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal confirm action -->
    <div class="modal fade c-no-history" id="modal-confirmation" tabindex="-1" role="dialog" aria-labelledby="modal-confirmation-title" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modal-confirmation-title">Confirmation</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="description"></p>
                    <p>Type "<span class="requirement"></span>" to confirm the action.</p>
                    <form id="modal-confirmation-form">
                        <input id="modal-confirmation-input" class="form-control" type="text" autocomplete="off" autofocus="autofocus"/>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" form="modal-confirmation-form" class="btn btn-action" disabled="disabled"></button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</th:block>
<th:block th:fragment="modal ()">
    <th:block th:replace="~{fragments/app::modal-essential}"></th:block>
    <div class="modal fade c-no-history" id="report-character-modal" tabindex="-1" role="dialog" aria-labelledby="report-character-modal-title" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="report-character-modal-title">Report player</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="report-character-menu">
                        <div>
                            The reports are public, <strong class="text-danger">your BattleTag and description will be visible to all users</strong>.
                            Moderators will review the report and vote on it, the majority wins. Moderators:
                            <span th:text="${#strings.listJoin(@userController.getModTags(), ', ')}"></span>
                        </div>
                        <form id="report-character-form" class="px-4 py-3" method="post">
                            <div class="form-group">
                                <label for="report-character-type">Report type</label>
                                <select id="report-character-type" class="form-control text-center" name="type" required="required">
                                    <th:block th:each="type,iterator : ${T(com.nephest.battlenet.sc2.model.local.PlayerCharacterReport.PlayerCharacterReportType).values()}">
                                        <option th:if="${type.isPublic()}" th:value="${type.name()}" th:text="${type.getDescription()}" th:attrappend="selected=${type.getId() == 1}?'selected'"></option>
                                    </th:block>
                                </select>
                            </div>
                            <div id="report-character-additional-group" class="form-group d-none">
                                <label for="report-character-additional">Alt account(populated from the team buffer, "green plus" button)</label>
                                <select id="report-character-additional" class="form-control text-center"  name="additionalPlayerCharacterId" required="required" disabled="disabled">
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="report-character-evidence">
                                    <span class="d-block mb-2">Evidence.</span>
                                    <span class="d-block mb-2">
                                        Upload your replay to <a href="https://drop.sc/" target="_blank">drop.sc</a>
                                        and include the drop.sc link in the evidence if it's relevant. We don't have access
                                        to your replays, so we can't validate your report without it.
                                    </span>
                                    <span class="d-block mb-2">
                                        <strong class="text-danger">
                                            Please read the
                                            <a th:href="${@environment.getProperty('com.nephest.battlenet.sc2.player.complaint.policy.link')}" rel="noopener" target="_blank">player complaint policy</a>
                                            before reporting a player. Invalid reports will be removed.
                                        </strong>
                                    </span>
                                </label>
                                <textarea
                                        id="report-character-evidence"
                                        class="form-control text-left readable"
                                        name="evidence"
                                        th:maxlength="${T(com.nephest.battlenet.sc2.model.local.Evidence).MAX_LENGTH}"
                                        minLength="10"
                                        required="required"
                                        autofocus="autofocus"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Report</button>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal reveal player -->
    <div
            sec:authorize="hasRole('ROLE_REVEALER')"
            class="modal fade c-no-history"
            id="modal-reveal-player"
            tabindex="-1"
            role="dialog"
            aria-labelledby="modal-reveal-player-title"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modal-reveal-player-title">Reveal</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-left">
                    <form id="modal-reveal-import-player-form" class="form-inline flex-center-wrap-gap">
                        <input
                                class="form-control flex-grow-1 flex-basis-content"
                                type="text"
                                name="url"
                                pattern="^https?://aligulac.com/players/(\d+)(-.*)?/?$"
                                required="required"
                                title="http://aligulac.com/players/id(-name/)(optional)"
                                placeholder="Aligulac profile URL"
                                autocomplete="off"
                        />
                        <button type="submit" form="modal-reveal-import-player-form" class="btn btn-info">Import</button>
                    </form>
                    <div class="c-divider-hr"></div>
                    <form id="modal-reveal-player-form">
                        <div class="form-group d-flex flex-grow-1 flex-center-wrap-gap">
                            <input
                                    id="modal-reveal-player-input"
                                    class="form-control filtered-input-filter flex-grow-1 flex-basis-content"
                                    type="search"
                                    data-filtered-input-group="#modal-reveal-player-players"
                                    autocomplete="off"
                                    autofocus="autofocus"
                                    placeholder="Player search"
                            />
                            <button type="submit" form="modal-reveal-player-form" class="btn btn-action"></button>
                        </div>
                        <div id="modal-reveal-player-players" class="filtered-input-group">
                            <div class="form-check mb-3 d-none filtered-input-container" th:each="player : ${@proPlayerDAO.findAll()}">
                                <input
                                        th:id="|reveal-player-${player.id}|"
                                        type="radio"
                                        name="player"
                                        th:value="${player.id}"
                                />
                                <label
                                        class="form-check-label"
                                        th:for="|reveal-player-${player.id}|"
                                        th:text="|${player.nickname}${player.name != null ? ', ' + player.name : ''}${player.country != null ? ' ' + T(com.nephest.battlenet.sc2.util.MiscUtil).countryCodeToEmoji(player.country) : ''}|"
                                >
                                </label>
                            </div>
                        </div>
                    </form>
                    <div class="c-divider-hr"></div>
                    <section class="container-loading loading-none">
                    <div class="d-flex flex-wrap-gap mb-4">
                        <button id="pro-player-edit" class="btn btn-primary">Edit</button>
                        <button id="pro-player-new" class="btn btn-success">New</button>
                        <div class="flex-grow-1"></div>
                        <a role="button"
                           class="btn btn-secondary c-dropdown collapsed empty"
                           data-toggle="collapse"
                           href="#reveal-player-edit-form"
                           aria-expanded="false"
                           aria-controls="reveal-player-edit-form"
                        >
                        </a>
                    </div>
                    <form id="reveal-player-edit-form" class="collapse" method="post">
                        <div class="form-group row">
                            <label for="pro-player-edit-id" class="col-sm-2 col-form-label">Id</label>
                            <div class="col-sm-10">
                                <input type="text"
                                       class="form-control"
                                       id="pro-player-edit-id"
                                       name="pro-player-id"
                                       autocomplete="off"
                                       readonly="readonly"
                                />
                            </div>
                        </div>
                        <input name="pro-player-version" class="d-none"/>
                        <div class="form-group row">
                            <label for="pro-player-edit-nickname" class="col-sm-2 col-form-label required">Tag</label>
                            <div class="col-sm-10">
                                <input type="text"
                                   th:pattern="${T(com.nephest.battlenet.sc2.model.util.ModelUtil).VALIDATION_REGEXP_NOT_BLANK}"
                                   th:maxlength="${T(com.nephest.battlenet.sc2.model.local.ProPlayer).NAME_LENGTH_MAX}"
                                   class="form-control"
                                   id="pro-player-edit-nickname"
                                   name="pro-player-nickname"
                                   required="required"
                                   autocomplete="off"
                                   title="In-game tag/name"
                                />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="pro-player-edit-name" class="col-sm-2 col-form-label">Name</label>
                            <div class="col-sm-10">
                                <input type="text"
                                       th:maxlength="${T(com.nephest.battlenet.sc2.model.local.ProPlayer).NAME_LENGTH_MAX}"
                                       class="form-control"
                                       id="pro-player-edit-name"
                                       name="pro-player-name"
                                       autocomplete="off"
                                       title="Romanized name"
                                >
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="pro-player-edit-birthday" class="col-sm-2 col-form-label">Birthday</label>
                            <div class="col-sm-10">
                                <input type="date"
                                       class="form-control"
                                       id="pro-player-edit-birthday"
                                       name="pro-player-birthday"
                                       autocomplete="off"
                                       th:min="${T(com.nephest.battlenet.sc2.model.local.ProPlayer).minBirthday().toString()}"
                                       th:max="${T(com.nephest.battlenet.sc2.model.local.ProPlayer).maxBirthday().toString()}"
                                />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="pro-player-edit-country" class="col-sm-2 col-form-label">Country</label>
                            <div class="col-sm-10">
                                <div class="d-flex flex-column gap-1">
                                    <input type="search"
                                           class="form-control filtered-input-filter"
                                           id="pro-player-edit-country"
                                           name="country-search"
                                           autocomplete="off"
                                           data-filtered-input-group="#country-a2-pro-player-edit"
                                           data-trim="true"
                                           title="Country name(US locale)"
                                    />
                                    <div th:replace="~{fragments/form :: country-a2-filtered-input('pro-player-edit', 'pro-player-country')}"></div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="pro-player-edit-earnings" class="col-sm-2 col-form-label">Earnings</label>
                            <div class="col-sm-10">
                                <input type="number"
                                       th:min="${T(com.nephest.battlenet.sc2.model.local.ProPlayer).EARNINGS_MIN}"
                                       th:max="${T(com.nephest.battlenet.sc2.model.local.ProPlayer).EARNINGS_MAX}"
                                       class="form-control"
                                       id="pro-player-edit-earnings"
                                       name="pro-player-earnings"
                                       autocomplete="off"
                                       title="USD"
                                />
                            </div>
                        </div>
                        <section class="mb-3">
                            <h3>Links</h3>
                            <div id="pro-player-link-input-container" class="d-flex flex-wrap-gap-1-5 mb-4">
                                <div id="pro-player-link-input-template" class="dynamic-clone-element d-flex gap-1 align-items-center w-100 d-none">
                                    <input type="url"
                                           th:maxlength="${T(com.nephest.battlenet.sc2.model.local.SocialMediaLink).URL_MAX_LENGTH}"
                                           th:title="${T(com.nephest.battlenet.sc2.web.service.ProPlayerService).PLAYER_EDIT_ALLOWED_SOCIAL_MEDIA.![name].stream.collect(@formatUtil.joining(', '))}"
                                           th:pattern="${T(com.nephest.battlenet.sc2.web.service.ProPlayerService).PLAYER_EDIT_ALLOWED_SOCIAL_MEDIA_REGEXP}"
                                           class="form-control flex-grow-1 autofocus"
                                           name="link-url"
                                           autocomplete="off"
                                           disabled="disabled"
                                    >
                                    <button type="button"
                                            class="btn btn-outline-danger icofont-cross"
                                            title="Remove"
                                            data-action="remove-element"
                                    ></button>
                                </div>
                            </div>
                            <div class="text-left">
                                <button type="button"
                                        class="btn btn-outline-success icofont-plus clone-ctl"
                                        title="Add"
                                        data-clone-source="pro-player-link-input-template"
                                        data-clone-destination="pro-player-link-input-container"
                                        data-clone-class="dynamic-clone-element"
                                ></button>
                            </div>
                        </section>
                        <div class="d-flex flex-wrap-gap mb-3 justify-content-center">
                            <button type="submit" class="btn btn-action btn-success">Save</button>
                        </div>
                    </form>
                    <div class="text-center"><div th:replace="~{fragments/section :: loading-indicator}"></div></div>
                    </section>
                    <div class="c-divider-hr"></div>
                    <section class="log">
                        <section class="blame text-info"></section>
                        <section>
                            <header>
                                <form id="form-reveal-log" class="form-inline d-flex form-flex form-group-column flex-wrap-gap row-gap-1-5 justify-content-center mb-3">
                                    <div class="form-group d-flex flex-wrap-gap-05">
                                        <label for="reveal-log-revealer" class="d-flex gap-tiny">
                                            Revealer
                                        </label>
                                        <select
                                                class="form-control serializable ctl-reload"
                                                id="reveal-log-revealer"
                                                name="revealer"
                                                required="required"
                                        >
                                            <option value="ALL">All</option>
                                            <option value="EXCLUDE_SYSTEM" selected="selected">Non-system</option>
                                        </select>
                                    </div>
                                    <div class="form-group d-flex flex-wrap-gap-05">
                                        <label for="reveal-log-action" class="d-flex gap-tiny">
                                            Action
                                        </label>
                                        <select
                                                class="form-control serializable ctl-reload"
                                                id="reveal-log-action"
                                                name="action"
                                                required="required"
                                        >
                                            <option value="ALL" selected="selected">ALL</option>
                                            <option th:each="action : ${T(com.nephest.battlenet.sc2.model.local.AuditLogEntry.Action).values()}"
                                                    th:text="${action.name()}"
                                                    th:value="${action.name()}"
                                            >
                                            </option>
                                        </select>
                                    </div>
                                </form>
                            </header>
                            <div id="reveal-log-entries-container" class="container-loading loading-none">
                                <div id="reveal-log-entries" class="log-entries"></div>
                                <div th:replace="~{fragments/section :: loading-indicator}"></div>
                            </div>
                        </section>
                    </section>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal player info-->
    <div
            class="modal fade no-popup d-none"
            id="player-info"
            aria-labelledby="player-info-title"
            aria-hidden="true"
            data-view-name="character"
    >
        <div class="modal-dialog modal-complex modal-xl" >
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close close-left" type="button" aria-label="Back">
                        <span aria-hidden="true">&lArr;</span>
                    </button>
                    <h2 class="modal-title" id="player-info-title">
                        <a id="player-info-title-clan" class="clan-auto-search player-team"></a>
                        <span id="player-info-title-team" class="player-team"></span>
                        <span id="player-info-title-name"></span>
                        <span id="player-info-additional-container">
                            <span class="text-secondary">(</span>
                                <a id="player-info-title-clan-additional" class="clan-auto-search player-team"></a>
                                <span id="player-info-title-name-additional" class="text-secondary"></span>
                            <span class="text-secondary">)</span>
                        </span>
                    </h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <section id="character-reports" class="d-none collapse mb-3 container-loading loading-none">
                        <h3>Reports</h3>
                        <div class="character-reports"></div>
                        <div th:replace="~{fragments/section :: loading-indicator}"></div>
                    </section>
                    <nav>
                        <ul id="player-stats-tabs" class="nav nav-fill nav-pills mb-3 justify-content-center" role="tablist">
                            <li class="nav-item">
                                <a
                                        id="player-stats-summary-tab"
                                        class="nav-link"
                                        data-toggle="pill"
                                        data-target="#player-stats-summary"
                                        href="#player-stats-summary"
                                        role="tab"
                                        aria-controls="player-stats-summary"
                                        aria-selected="false"
                                >
                                    Summary
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                        id="player-stats-mmr-tab"
                                        class="nav-link active"
                                        data-toggle="pill"
                                        data-target="#player-stats-mmr"
                                        href="#player-stats-mmr"
                                        role="tab"
                                        aria-controls="player-stats-mmr"
                                        aria-selected="true"
                                >
                                    MMR
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                        id="player-stats-history-tab"
                                        class="nav-link"
                                        data-toggle="pill"
                                        data-target="#player-stats-history"
                                        href="#player-stats-history"
                                        role="tab"
                                        aria-controls="player-stats-history"
                                        aria-selected="false"
                                >
                                    Teams
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                        id="player-stats-characters-tab"
                                        class="nav-link"
                                        data-toggle="pill"
                                        data-target="#player-stats-characters"
                                        href="#player-stats-characters"
                                        role="tab"
                                        aria-controls="player-stats-characters"
                                        aria-selected="false"
                                >
                                    Characters
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                        id="player-stats-matches-tab"
                                        class="nav-link"
                                        data-toggle="pill"
                                        data-target="#player-stats-matches"
                                        href="#player-stats-matches"
                                        role="tab"
                                        aria-controls="player-stats-matches"
                                        aria-selected="false"
                                >
                                    Matches
                                </a>
                            </li>
                            <li class="nav-item">
                                <a
                                        id="player-stats-player-tab"
                                        class="nav-link"
                                        data-toggle="pill"
                                        data-target="#player-stats-player"
                                        href="#player-stats-player"
                                        role="tab"
                                        aria-controls="player-stats-player"
                                        aria-selected="false"
                                >
                                    Links
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div id="player-stats-all" class="tab-content">
                        <section id="player-stats-summary" class="tab-pane fade" data-view-title="Summary">
                            <section id="player-stats" class="container-loading loading-none">
                                <h3>
                                    Career summary
                                    <img
                                            th:src="@{/static/icon/misc/info.svg}"
                                            alt="Highest MMR, league, and total games played for all seasons."
                                            title="Highest MMR, league, and total games played for all seasons."
                                            data-toggle="tooltip"
                                    />
                                </h3>
                                <div id="player-stats-container" class="card-deck"></div>
                                <aside>
                                    <p class="text-secondary">
                                        Race specific statistics are based on the teams where the player has played
                                        most of the games as a specific race
                                    </p>
                                </aside>
                                <div th:replace="~{fragments/section :: loading-indicator}"></div>
                            </section>
                        </section>
                        <section id="player-stats-mmr" class="tab-pane fade show active" data-view-title="MMR history">
                            <section id="character-mmr-section">
                                <h3>Solo MMR history
                                    <span class="fullscreen-toggle align-middle" data-target="player-stats-mmr"></span></h3>
                                <div id="mmr-history-all-loading" class="container-loading loading-none"></div>

                                <div id="mmr-history-info-panel" class="flex-col-adaptive adaptive-border-color-splitter">
                                <div id="mmr-history-ctl">
                                <div><div id="mmr-history-filters"></div><div id="mmr-history-games-avg-mmr"></div></div>
                                <div th:replace="~{fragments/section:: form-mmr-history('mmr', true)}"></div>
                                </div>
                                <div id="mmr-summary-table-container" class="table-responsive container-loading loading-none">
                                    <table id="mmr-summary-table" class="table inline-table table-sm table-hover">
                                        <thead>
                                        <tr>
                                            <th scope="col">Race</th>
                                            <th scope="col">Games</th>
                                            <th scope="col">Last MMR</th>
                                            <th scope="col">Avg MMR</th>
                                            <th scope="col">Max MMR</th>
                                        </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                    <div th:replace="~{fragments/section :: loading-indicator}"></div>
                                </div>
                                <div class="table-responsive flex-grow-1">
                                    <table id="mmr-tier-progress-table" class="table table-sm table-hover">
                                        <thead>
                                        <tr>
                                            <th scope="col"><br/>Race</th>
                                            <th scope="col"
                                                class="hoverable"
                                                title="Tier progress based on regional rank/top% and official tier thresholds for LotV"
                                                data-toggle="tooltip"><br/>Progress</th>
                                        </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                                </div>
                                <table
                                        id="mmr-table"
                                        class="chartable"
                                        data-chart-type="line"
                                        data-chart-group="mmr"
                                        data-chart-tooltip-percentage="false"
                                        data-chart-tooltip-table-headers="Race,Season,League,MMR,Games/W%,Global Rank,Region rank,League rank"
                                        data-chart-id="mmr-chart"
                                        data-chart-x-title="Date" data-chart-y-title="MMR"
                                        data-chart-performance="fast"
                                        data-chart-will-read-frequently="true"
                                        data-chart-point-radius="0.5"
                                        data-chart-x-type="time"
                                        data-chart-x-time-unit="false"
                                        data-chart-direct="true"
                                        data-chart-zoom="xy"
                                        data-chart-custom-annotations="mmr-meta"
                                >
                                    <thead><tr></tr></thead>
                                    <tbody><tr></tr></tbody>
                                </table>
                                <div th:replace="~{fragments/section :: chartjs('mmr', _)}"></div>
                                <div id="mmr-history-loading" class="container-loading loading-none">
                                    <div th:replace="~{fragments/section :: loading-indicator}"></div>
                                </div>
                            </section>
                        </section>
                        <section id="player-stats-history" class="tab-pane fade container-loading loading-none" data-view-title="Teams">
                            <section id="character-teams-section">
                                <h3>Teams</h3>
                                <select id="teams-season-select" class="form-control mb-2 text-center season-picker"></select>
                                <div th:replace="~{fragments/table :: team('character-teams-table-container', 'character-teams-table', 'table-team teams table-selectable-row', 'true')}"></div>
                                <div th:replace="~{fragments/section :: loading-indicator}"></div>
                            </section>
                        </section>
                        <section id="player-stats-characters" class="tab-pane fade container-loading loading-none" data-view-title="Linked characters">
                            <div th:replace="~{fragments/table :: player-search('linked-characters-table', 'Linked characters', 'table-selectable-row')}"></div>
                            <p th:replace="~{fragments/section :: missing-characters-message}"></p>
                            <div th:replace="~{fragments/section :: loading-indicator}"></div>
                        </section>
                        <section id="player-stats-player" class="tab-pane fade" data-view-title="Player info">
                            <div id="player-stats-player-loading" class="container-loading loading-none"></div>
                            <section id="pro-player-info" class="pro-player-info container-loading loading-none">
                                <h3>Player</h3>
                                <table class="table c-table-simple m-auto">
                                    <tbody>
                                    <tr id="pro-player-name" class="pro-player-info"><th scope="row">Name</th><td></td></tr>
                                    <tr id="pro-player-birthday" class="pro-player-info"><th scope="row">Birthday</th><td></td></tr>
                                    <tr id="pro-player-country" class="pro-player-info"><th scope="row">Country</th><td></td></tr>
                                    <tr id="pro-player-team" class="pro-player-info"><th scope="row">Team</th><td></td></tr>
                                    <tr id="pro-player-earnings" class="pro-player-info"><th scope="row">Earnings</th><td></td></tr>
                                    </tbody>
                                </table>
                                <div th:replace="~{fragments/section :: loading-indicator}"></div>
                            </section>
                            <section id="character-links-section" class="container-loading loading-none">
                                <h3>Links</h3>
                                <ul id="character-links" class="list-unstyled text-center">
                                    <li class="mb-3">
                                        <ul class="d-flex flex-center-wrap-gap list-unstyled">
                                            <li class="pro-player-info">
                                                <a id="link-liquipedia" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/liquipedia.svg}" alt="Liquipedia"/>
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-aligulac" class="social-media" href="#" target="_blank" rel="noopener">
                                                    &sum;
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-instagram" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/instagram.svg}" alt="Instagram"/>
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-twitter" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/twitter.svg}" alt="Twitter"/>
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-twitch" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/twitch.svg}" alt="Twitch"/>
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-bilibili" class="social-media" href="#" target="_blank" rel="noopener" title="Bilibili">
                                                    <span class="icofont icofont-bilibili"></span>
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-youtube" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/youtube.svg}" alt="Youtube"/>
                                                </a>
                                            </li>
                                            <li class="pro-player-info">
                                                <a id="link-discord" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/discord.svg}" alt="Discord"/>
                                                </a>
                                            </li>
                                            <li>
                                                <a id="link-sc2arcade" class="social-media" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/sc2arcade.png}" alt="SC2Arcade"/>
                                                </a>
                                            </li>
                                            <li class="broken d-none">
                                                <ul>
                                                    <li>
                                                        <a id="link-sc2" class="social-media" href="#" target="_blank" rel="noopener nofollow">
                                                            <img th:src="@{/static/icon/logo/sc2.svg}" alt="SC2"/>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li class="additional-link-container">
                                                <a id="link-sc2-replay-stats" class="social-media link-additional" href="#" target="_blank" rel="noopener">
                                                    <img th:src="@{/static/icon/logo/replaystats.png}" alt="SC2Replaystats"/>
                                                </a>
                                            </li>
                                            <li id="additional-link-loading" class="container-loading loading-none">
                                               <div class="text-center"><div th:replace="~{fragments/section :: loading-indicator}"></div></div>
                                            </li>
                                        </ul>
                                    </li>
                                    <li id="linked-external-accounts" class="container-loading loading-none">
                                        <ul class="d-inline-flex flex-column flex-center-wrap-gap list-unstyled flex-list">
                                            <li>
                                                <span id="link-battletag" class="social-media d-flex flex-center-wrap-gap">
                                                    <img th:src="@{/static/icon/logo/battlenet.svg}" alt="BattleTag" title="BattleTag" class="flex-grow-1"/>
                                                    <span class="tag copy-to-clipboard text-right"></span>
                                                </span>
                                            </li>
                                            <li>
                                                <span id="link-discord-connection" class="social-media account external d-flex flex-center-wrap-gap">
                                                    <img th:src="@{/static/icon/logo/discord.svg}" alt="Discord" title="Discord" class="flex-grow-1"/>
                                                    <span class="tag copy-to-clipboard text-right"></span>
                                                </span>
                                            </li>
                                        </ul>
                                        <div class="text-center"><div th:replace="~{fragments/section :: loading-indicator}"></div></div>
                                    </li>
                                    <li class="additional-link-container d-none">
                                        <table class="inline-table table-gap-1">
                                            <tbody>
                                                <tr id="link-sc2-battle-net" class="social-media link-additional d-none">
                                                    <th scope="row"><img th:src="@{/static/icon/logo/sc2.svg}" alt="SC2 BattleNet" title="SC2 BattleNet"/></th>
                                                    <td><span class="copy-to-clipboard text-break-all"></span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </li>
                                </ul>
                            </section>
                            <section id="revealed-report">
                                <ul class="d-inline-block">
                                    <li th:insert="~{/fragments/section :: missing-battle-tag-message}"></li>
                                    <li>Do you know which pro player plays on this account? Please
                                        <a th:href="@{/contacts}">contact me</a>.
                                    </li>
                                    <li>Some information is taken from <a href="http://aligulac.com/" rel="noopener" target="_blank">aligulac</a>
                                        and <a href="https://liquipedia.net/starcraft2/" rel="noopener" target="_blank">liquipedia</a>.
                                        <aside>Found incorrect information in the "player"/"links" section? Report this to
                                            the respective project or <a th:href="@{/contacts}">contact me</a>.</aside>
                                    </li>
                                </ul>
                            </section>
                        </section>
                        <section id="player-stats-matches" class="tab-pane fade container-loading loading-none" data-view-title="Matches">
                            <div th:replace="~{/fragments/section :: matches('', true, false)}"></div>
                            <div th:replace="~{fragments/section :: loading-indicator}"></div>
                            <div id="player-stats-matches-reset-loading" class="container-loading loading-none"></div>
                        </section>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="follow-button" type="button" class="btn btn-primary d-none">Follow</button>
                    <button id="unfollow-button" type="button" class="btn btn-primary d-none">Unfollow</button>
                    <a role="button" class="group-link btn btn-primary" type="button" href="#"><span class="icofont-users mr-1"></span>Group</a>
                    <button
                            sec:authorize="hasRole('ROLE_REVEALER')"
                            class="btn btn-info"
                            type="button"
                            data-toggle="modal"
                            data-target="#modal-reveal-player"
                    >
                        Reveal
                    </button>
                    <button class="btn btn-danger" type="button" id="report-character-toggle" data-toggle="modal" data-target="#report-character-modal">Report</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="~{fragments/group :: group}"></div>
    <div th:replace="~{fragments/section :: modal-no-popup('versus-modal', 'Versus', ~{fragments/no-tab :: no-tab-short ('versus', 'Versus', ~{fragments/versus :: versus}, false)})}"></div>
    <div id="status-generating-fullscreen" class="status-generating-begin position-absolute w-100 h-100 invisible" data-hide-mode="hide">
        <div class="d-flex justify-content-center w-100 h-100">
            <span class="align-self-center spinner-border text-primary" role="status" aria-hidden="true"></span>
        </div>
    </div>
    <div id="team-buffer" class="d-none sticky-bottom border-top border-primary" data-view-name="team-buffer">
        <h2 class="mt-2 d-flex justify-content-end flex-wrap-reverse gap-1">
            <a id="team-buffer-collapse" class="c-dropdown c-dropup collapsed flex-grow-1" href="#team-buffer-top-container"
               data-toggle="collapse" role="button" aria-expanded="false" aria-controls="team-buffer-top-container">
                Buffer(<span id="team-buffer-count"></span> teams, <span id="team-buffer-clan-count"></span> clans)
            </a>
            <span class="d-flex gap-1">
                <div class="dropup">
                     <span id="team-buffer-copy"
                           class="table-image table-image-square vertical-align-initial background-cover clipboard-img d-inline-block dropdown-toggle dropdown-toggle-no-symbol"
                           role="button"
                           title="Copy to clipboard"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-boundary="body">
                        <span class="sr-only">Copy to clipboard</span>
                    </span>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="team-buffer-copy">
                        <a id="team-buffer-copy-character-id" class="dropdown-item action-team" href="#">characterId</a>
                        <a id="team-buffer-copy-legacy-id" class="dropdown-item action-team" href="#">legacyId</a>
                        <a id="team-buffer-copy-character-race-id" class="dropdown-item action-team" href="#">raceId</a>
                        <a id="team-buffer-copy-team-legacy-uid" class="dropdown-item action-team" href="#">teamLegacyUid</a>
                        <a id="team-buffer-copy-clan-id" class="dropdown-item" href="#">clanId</a>
                    </div>
                </div>
                <a id="team-buffer-group" href="#" rel="noopener" target="_blank" title="Group" class="table-image-unicode text-decoration-none text-primary" role="button">
                    <span class="icofont-users"></span>
                </a>
                <a id="team-buffer-versus" href="#" rel="noopener" target="_blank" class="font-weight-bold d-inline-block" role="button">
                    VS
                </a>
                <a id="team-buffer-mmr" href="#" rel="noopener" target="_blank" class="table-image table-image-square background-cover chart-line-img d-inline-block" role="button">
                    <span class="sr-only">MMR</span>
                </a>
                <span id="team-buffer-clear" class="table-image table-image-square background-cover cross-img d-inline-block" role="button">
                    <span class="sr-only">Clear</span>
                </span>
            </span>
        </h2>
        <div id="team-buffer-top-container" class="collapse">
            <div th:replace="~{fragments/table :: team('team-buffer-container', 'team-buffer-teams', 'd-none', 'true')}"></div>
            <div data-view-name="clan-buffer">
                <div th:replace="~{fragments/table :: clan ('team-buffer-clan-container', 'team-buffer-clans', 'd-none')}"></div>
            </div>
        </div>
    </div>
</th:block>
</body>
</html>
